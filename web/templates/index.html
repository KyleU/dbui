<%: func Index(ctx web.RequestContext, w io.Writer) (int, error) %>

<%~ "layout/basic.html" %>

<%@ body { %>
  <div class="uk-section uk-section-small">
    <div class="uk-container">
      <div class="uk-card <%= ctx.Profile.Theme.CardClass %> uk-card-body">
        <div class="right">
          <a class="<%= ctx.Profile.LinkClass() %>" href="<%= ctx.Route("workspace.add.form") %>">add new</a>
        </div>
        <h3 style="margin-top: 0;" class="uk-card-title">Projects</h3>
        <table class="uk-table uk-table-divider uk-table-small">
          <tbody>
            <% if len(ctx.AppInfo.ConfigService.ProjectRegistry.Names()) == 0 { %>
              <tr><td>No projects available</td></tr>
            <% } %>
            <tr>
              <td><a class="<%= ctx.Profile.LinkClass() %>" href="<%= ctx.Route("workspace", "p", "_root") %>">system</a></td>
            </tr>
            <% for _, k := range ctx.AppInfo.ConfigService.ProjectRegistry.Names() { %>
              <tr>
                <td><a class="<%= ctx.Profile.LinkClass() %>" href="<%= ctx.Route("workspace", "p", k) %>"><%= k %></a></td>
              </tr>
            <% } %>
          </tbody>
        </table>
      </div>
      <div class="uk-grid-small uk-grid-match uk-child-width-1-3@s uk-margin-medium" uk-grid>
        <div>
          <div class="uk-card <%= ctx.Profile.Theme.CardClass %> uk-card-body">
            <h3 class="uk-card-title"><a class="<%= ctx.Profile.LinkClass() %>" href="<%= ctx.Route("workspace.test") %>">Workspace Test</a></h3>
            <p>A simple workspace to test functionality</p>
          </div>
        </div>
        <div>
          <div class="uk-card <%= ctx.Profile.Theme.CardClass %> uk-card-body">
            <h3 class="uk-card-title"><a class="<%= ctx.Profile.LinkClass() %>" href="<%= ctx.Route("sql.form") %>">Ad-hoc Query</a></h3>
            <p>Run queries and manipulate the results</p>
          </div>
        </div>
        <div>
          <div class="uk-card <%= ctx.Profile.Theme.CardClass %> uk-card-body">
            <h3 class="uk-card-title"><a class="<%= ctx.Profile.LinkClass() %>" href="<%= ctx.Route("about") %>">About</a></h3>
            <p>Details about the running instance of <%= ctx.AppInfo.AppName %></p>
          </div>
        </div>
      </div>
    </div>
  </div>
<% } %>
